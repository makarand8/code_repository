%%[

Set @subscriberkey = RequestParameter("subkey")

SET @rr = CreateObject("RetrieveRequest")  

SetObjectProperty(@rr, "ObjectType","List")  /* creating object to retrieve list with paramters */
AddObjectArrayItem(@rr,"Properties","ID")  
AddObjectArrayItem(@rr,"Properties","ListName") 
AddObjectArrayItem(@rr,"Properties","ListClassification")
AddObjectArrayItem(@rr,"Properties","Type")    


SET @sfp1 = CreateObject("SimpleFilterPart")  /* Filter 1 */
SetObjectProperty(@sfp1, "Property", "ListClassification")  
SetObjectProperty(@sfp1, "SimpleOperator", "equals")  
AddObjectArrayItem(@sfp1,"Value","PublicationList")    

SET @sfp2 = CreateObject("SimpleFilterPart")  /* Filter 2 */
SetObjectProperty(@sfp2, "Property", "Type")  
SetObjectProperty(@sfp2, "SimpleOperator", "equals")  
AddObjectArrayItem(@sfp2,"Value", "Public")    

Set @cfp = CreateObject("ComplexFilterPart")  /* Complex filter is a combination of simple filters (AND or OR)*/
SetObjectProperty(@cfp, "LeftOperand", @sfp1)  
SetObjectProperty(@cfp, "LogicalOperator", "AND")  
SetObjectProperty(@cfp, "RightOperand", @sfp2)   

SetObjectProperty(@rr,"Filter",@cfp)
SET @Lists = InvokeRetrieve(@rr)  


For @count = 1 to rowcount(@Lists) do  /* For loop syntax */
         set @list = row(@lists,@count)
         set @id_int = field(@list,"ID",0)
         set @id = concat(field(@list,"ID",0),"")
         set @listName = field(@list,"ListName",0)
         set @listClassification = field(@list,"ListClassification",0)
         set @listType = field(@list,"Type",0)
    
 ]%%        
       <input type="checkbox" id="%%=v(@id)=%%" name="publist" value="%%=v(@id)=%%">%%=v(@listName)=%%
<br>
<br>

 %%[next @count]%%

SubscriberKey = %%=v(@subscriberkey)=%%
